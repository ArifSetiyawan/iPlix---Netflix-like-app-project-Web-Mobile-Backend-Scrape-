{"ast":null,"code":"import _toConsumableArray from \"/home/sumirart/NETFLIXCLONE-NEW/Boilerplate-Iflix-Web-Clone-With-React/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/sumirart/NETFLIXCLONE-NEW/Boilerplate-Iflix-Web-Clone-With-React/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/sumirart/NETFLIXCLONE-NEW/Boilerplate-Iflix-Web-Clone-With-React/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/sumirart/NETFLIXCLONE-NEW/Boilerplate-Iflix-Web-Clone-With-React/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/sumirart/NETFLIXCLONE-NEW/Boilerplate-Iflix-Web-Clone-With-React/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/sumirart/NETFLIXCLONE-NEW/Boilerplate-Iflix-Web-Clone-With-React/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/sumirart/NETFLIXCLONE-NEW/Boilerplate-Iflix-Web-Clone-With-React/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/sumirart/NETFLIXCLONE-NEW/Boilerplate-Iflix-Web-Clone-With-React/src/movie/screens/search.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport queryString from 'query-string';\nimport axios from 'axios';\nimport { Container, Button, Card, CardBody, CardTitle, CardText, CardImg, CardGroup } from 'reactstrap';\nimport Item from '@bit/ranm8.netflix-like.ui.item';\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, props));\n    _this.fetchMore = _this.fetchMore.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      movies: [],\n      page: 1,\n      lastPage: 0\n    };\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getMovies(1);\n    }\n  }, {\n    key: \"fetchMore\",\n    value: function fetchMore() {\n      var nextPage = this.state.page + 1;\n      this.getMovies(nextPage);\n    }\n  }, {\n    key: \"getMovies\",\n    value: function getMovies(number) {\n      var _this2 = this;\n\n      var values = queryString.parse(this.props.location.search);\n\n      if (this.state.movies === undefined || this.state.movies.length == 0) {\n        axios.get(\"http://192.168.0.62:3333/movies?search=\" + values.search + \"&page=\" + number).then(function (res) {\n          // console.log(res.data);\n          _this2.setState({\n            lastPage: res.data.lastPage,\n            page: number\n          });\n\n          _this2.setState({\n            movies: res.data.data\n          });\n        }).catch(function (err) {\n          return alert(err.response);\n        });\n      } else {\n        axios.get(\"http://192.168.0.62:3333/movies?search=\" + values.search + \"&page=\" + number).then(function (res) {\n          var pushMovie = [].concat(_toConsumableArray(_this2.state.movies), _toConsumableArray(res.data.data));\n          console.log(pushMovie);\n\n          _this2.setState({\n            lastPage: res.data.lastPage,\n            page: number\n          });\n\n          _this2.setState({\n            movies: pushMovie\n          });\n        }).catch(function (err) {\n          return alert(err.response);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var values = queryString.parse(this.props.location.search);\n      return React.createElement(\"section\", {\n        id: \"semua\",\n        style: {\n          marginTop: \"5vh\",\n          marginBottom: \"5vh\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row p-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Search for: \", values.search))), this.state.lastPage === 0 ? React.createElement(\"div\", {\n        className: \"row p-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"No movies found!\"))) : React.createElement(CardGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          marginBottom: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, this.state.movies.map(function (data) {\n        return React.createElement(Item, {\n          key: data.id,\n          title: data.title.substr(0, data.title.indexOf('(')),\n          score: data.rating.substr(0, 3),\n          overview: data.description,\n          backdrop: data.thumbnails,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        });\n      }))), React.createElement(\"div\", {\n        className: \"col-md-12\",\n        align: \"center\",\n        style: {\n          marginBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, this.state.page === this.state.lastPage || this.state.lastPage === 0 || this.state.lastPage === 1 ? React.createElement(Button, {\n        color: \"secondary\",\n        size: \"large\",\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Load More\") : React.createElement(Button, {\n        onClick: this.fetchMore,\n        color: \"success\",\n        size: \"large\",\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Load More\"))));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/home/sumirart/NETFLIXCLONE-NEW/Boilerplate-Iflix-Web-Clone-With-React/src/movie/screens/search.js"],"names":["React","Component","Link","queryString","axios","Container","Button","Card","CardBody","CardTitle","CardText","CardImg","CardGroup","Item","Search","props","fetchMore","bind","state","movies","page","lastPage","getMovies","nextPage","number","values","parse","location","search","undefined","length","get","then","res","setState","data","catch","err","alert","response","pushMovie","console","log","marginTop","marginBottom","map","id","title","substr","indexOf","rating","description","thumbnails"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,SAAT,EAAoBC,MAApB,EAA4BC,IAA5B,EAAkCC,QAAlC,EAA4CC,SAA5C,EAAuDC,QAAvD,EAAiEC,OAAjE,EAA0EC,SAA1E,QAA2F,YAA3F;AACA,OAAOC,IAAP,MAAiB,iCAAjB;;IAEMC,M;;;;;AACF,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,gFAAMA,KAAN;AACA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeC,IAAf,uDAAjB;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,MAAM,EAAE,EADC;AAETC,MAAAA,IAAI,EAAE,CAFG;AAGTC,MAAAA,QAAQ,EAAE;AAHD,KAAb;AAHe;AAQlB;;;;wCAEmB;AAChB,WAAKC,SAAL,CAAe,CAAf;AACH;;;gCAEW;AACR,UAAMC,QAAQ,GAAG,KAAKL,KAAL,CAAWE,IAAX,GAAkB,CAAnC;AACA,WAAKE,SAAL,CAAeC,QAAf;AACH;;;8BAESC,M,EAAQ;AAAA;;AACd,UAAMC,MAAM,GAAGtB,WAAW,CAACuB,KAAZ,CAAkB,KAAKX,KAAL,CAAWY,QAAX,CAAoBC,MAAtC,CAAf;;AACA,UAAI,KAAKV,KAAL,CAAWC,MAAX,KAAsBU,SAAtB,IAAmC,KAAKX,KAAL,CAAWC,MAAX,CAAkBW,MAAlB,IAA4B,CAAnE,EAAsE;AAClE1B,QAAAA,KAAK,CAAC2B,GAAN,CAAU,4CAA4CN,MAAM,CAACG,MAAnD,GAA4D,QAA5D,GAAuEJ,MAAjF,EACKQ,IADL,CACU,UAAAC,GAAG,EAAI;AACT;AACA,UAAA,MAAI,CAACC,QAAL,CAAc;AAAEb,YAAAA,QAAQ,EAAEY,GAAG,CAACE,IAAJ,CAASd,QAArB;AAA+BD,YAAAA,IAAI,EAAEI;AAArC,WAAd;;AACA,UAAA,MAAI,CAACU,QAAL,CAAc;AAAEf,YAAAA,MAAM,EAAEc,GAAG,CAACE,IAAJ,CAASA;AAAnB,WAAd;AACH,SALL,EAMKC,KANL,CAMW,UAAAC,GAAG;AAAA,iBAAIC,KAAK,CAACD,GAAG,CAACE,QAAL,CAAT;AAAA,SANd;AAOH,OARD,MAQO;AACHnC,QAAAA,KAAK,CAAC2B,GAAN,CAAU,4CAA4CN,MAAM,CAACG,MAAnD,GAA4D,QAA5D,GAAuEJ,MAAjF,EACKQ,IADL,CACU,UAAAC,GAAG,EAAI;AACT,cAAMO,SAAS,gCAAO,MAAI,CAACtB,KAAL,CAAWC,MAAlB,sBAA6Bc,GAAG,CAACE,IAAJ,CAASA,IAAtC,EAAf;AACAM,UAAAA,OAAO,CAACC,GAAR,CAAYF,SAAZ;;AACA,UAAA,MAAI,CAACN,QAAL,CAAc;AAAEb,YAAAA,QAAQ,EAAEY,GAAG,CAACE,IAAJ,CAASd,QAArB;AAA+BD,YAAAA,IAAI,EAAEI;AAArC,WAAd;;AACA,UAAA,MAAI,CAACU,QAAL,CAAc;AAAEf,YAAAA,MAAM,EAAEqB;AAAV,WAAd;AACH,SANL,EAOKJ,KAPL,CAOW,UAAAC,GAAG;AAAA,iBAAIC,KAAK,CAACD,GAAG,CAACE,QAAL,CAAT;AAAA,SAPd;AAQH;AAEJ;;;6BAEQ;AACL,UAAMd,MAAM,GAAGtB,WAAW,CAACuB,KAAZ,CAAkB,KAAKX,KAAL,CAAWY,QAAX,CAAoBC,MAAtC,CAAf;AACA,aACI;AAAS,QAAA,EAAE,EAAC,OAAZ;AAAoB,QAAA,KAAK,EAAE;AAAEe,UAAAA,SAAS,EAAE,KAAb;AAAoBC,UAAAA,YAAY,EAAE;AAAlC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAuCnB,MAAM,CAACG,MAA9C,CADJ,CADJ,CADJ,EAOQ,KAAKV,KAAL,CAAWG,QAAX,KAAwB,CAAxB,GACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,CADJ,CADJ,GAOI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAqB,QAAA,KAAK,EAAE;AAAEuB,UAAAA,YAAY,EAAE;AAAhB,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEQ,KAAK1B,KAAL,CAAWC,MAAX,CAAkB0B,GAAlB,CAAsB,UAAAV,IAAI;AAAA,eACtB,oBAAC,IAAD;AAAM,UAAA,GAAG,EAAEA,IAAI,CAACW,EAAhB;AACI,UAAA,KAAK,EAAEX,IAAI,CAACY,KAAL,CAAWC,MAAX,CAAkB,CAAlB,EAAqBb,IAAI,CAACY,KAAL,CAAWE,OAAX,CAAmB,GAAnB,CAArB,CADX;AAEI,UAAA,KAAK,EAAEd,IAAI,CAACe,MAAL,CAAYF,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB,CAFX;AAGI,UAAA,QAAQ,EAAEb,IAAI,CAACgB,WAHnB;AAII,UAAA,QAAQ,EAAEhB,IAAI,CAACiB,UAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADsB;AAAA,OAA1B,CAFR,CADJ,CAdZ,EAwCI;AAAK,QAAA,SAAS,EAAC,WAAf;AAA2B,QAAA,KAAK,EAAC,QAAjC;AAA0C,QAAA,KAAK,EAAE;AAAER,UAAAA,YAAY,EAAE;AAAhB,SAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAK1B,KAAL,CAAWE,IAAX,KAAoB,KAAKF,KAAL,CAAWG,QAA/B,IAA2C,KAAKH,KAAL,CAAWG,QAAX,KAAwB,CAAnE,IAAwE,KAAKH,KAAL,CAAWG,QAAX,KAAwB,CAAhG,GACG,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,WAAd;AAA0B,QAAA,IAAI,EAAC,OAA/B;AAAuC,QAAA,MAAM,EAAC,QAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADH,GAGG,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKL,SAAtB;AAAiC,QAAA,KAAK,EAAC,SAAvC;AAAiD,QAAA,IAAI,EAAC,OAAtD;AAA8D,QAAA,MAAM,EAAC,QAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJR,CAxCJ,CADJ,CADJ;AAqDH;;;;EAlGgBf,S;;AAqGrB,eAAea,MAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom'\nimport queryString from 'query-string';\nimport axios from 'axios';\n\nimport { Container, Button, Card, CardBody, CardTitle, CardText, CardImg, CardGroup } from 'reactstrap'\nimport Item from '@bit/ranm8.netflix-like.ui.item';\n\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.fetchMore = this.fetchMore.bind(this);\n        this.state = {\n            movies: [],\n            page: 1,\n            lastPage: 0\n        };\n    }\n\n    componentDidMount() {\n        this.getMovies(1)\n    }\n\n    fetchMore() {\n        const nextPage = this.state.page + 1;\n        this.getMovies(nextPage);\n    }\n\n    getMovies(number) {\n        const values = queryString.parse(this.props.location.search);\n        if (this.state.movies === undefined || this.state.movies.length == 0) {\n            axios.get(\"http://192.168.0.62:3333/movies?search=\" + values.search + \"&page=\" + number)\n                .then(res => {\n                    // console.log(res.data);\n                    this.setState({ lastPage: res.data.lastPage, page: number });\n                    this.setState({ movies: res.data.data });\n                })\n                .catch(err => alert(err.response))\n        } else {\n            axios.get(\"http://192.168.0.62:3333/movies?search=\" + values.search + \"&page=\" + number)\n                .then(res => {\n                    const pushMovie = [...this.state.movies, ...res.data.data];\n                    console.log(pushMovie);\n                    this.setState({ lastPage: res.data.lastPage, page: number });\n                    this.setState({ movies: pushMovie });\n                })\n                .catch(err => alert(err.response))\n        }\n\n    }\n\n    render() {\n        const values = queryString.parse(this.props.location.search)\n        return (\n            <section id=\"semua\" style={{ marginTop: \"5vh\", marginBottom: \"5vh\" }}>\n                <Container>\n                    <div className=\"row p-3\">\n                        <div className=\"col-md-12\">\n                            <h2 className=\"text-left\">Search for: {values.search}</h2>\n                        </div>\n                    </div>\n                    {\n                        this.state.lastPage === 0 ?\n                            <div className=\"row p-3\">\n                                <div className=\"col-md-12\">\n                                    <h2 className=\"text-left\">No movies found!</h2>\n                                </div>\n                            </div>\n                            :\n                            <CardGroup>\n                                <div className=\"row\" style={{ marginBottom: 10 }}>\n                                    {\n                                        this.state.movies.map(data =>\n                                            <Item key={data.id}\n                                                title={data.title.substr(0, data.title.indexOf('('))}\n                                                score={data.rating.substr(0, 3)}\n                                                overview={data.description}\n                                                backdrop={data.thumbnails}\n                                            />\n                                        )\n                                    }\n                                    {/* previous clickable item\n                                    <div className=\"col-sm-6 col-md-4 col-lg-2\" key={data.id}>\n                                        <Card style={{ marginBottom: 20 }}>\n                                            <CardImg top width=\"100%\" src={data.thumbnails} alt={data.title} />\n                                            <CardBody>\n                                                <CardTitle>{data.title}</CardTitle>\n                                                <CardText style={{ maxHeight: 200, overflow: \"hidden\" }}>{data.description}</CardText>\n                                                <Link to={{ pathname: '/movie/' + data.slug, state: data }} className=\"btn btn-primary btn-sm float-right\" data={data} >Tonton</Link>\n                                            </CardBody>\n                                        </Card>\n                                    </div> */}\n                                </div>\n                            </CardGroup>\n                    }\n                    <div className=\"col-md-12\" align=\"center\" style={{ marginBottom: 20 }}>\n                        {this.state.page === this.state.lastPage || this.state.lastPage === 0 || this.state.lastPage === 1 ?\n                            <Button color=\"secondary\" size=\"large\" target=\"_blank\" >Load More</Button>\n                            :\n                            <Button onClick={this.fetchMore} color=\"success\" size=\"large\" target=\"_blank\">\n                                Load More</Button>\n                        }\n                    </div>\n                </Container>\n            </section>\n        );\n    }\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}